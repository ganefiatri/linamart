let FoodPress,FoodPress_Cart_Items,FoodPress_Cart_Customer,FoodPress_Cart_Detail,FoodPress_Cart;FoodPress={init:function(){let e=this;e.scrollCategory(),e.loadMore(),e.buttonAdd(),e.buttonQty(),e.loadBasket(),e.openSupportWa(),e.setProductImage()},setProductImage:function(){let e=document.querySelectorAll(".productbox-image");for(var t=0,o=e.length;t<o;t++)e[t].style.height=e[t].offsetWidth+"px"},scrollCategory:function(){let e=document.getElementById("category-slide");if(void 0!==e&&null!=e){let t=e.querySelector(".arrow-left"),o=e.querySelector(".arrow-right"),r=e.querySelector(".slide-category"),s=r.scrollWidth,n=r.scrollLeft;s<=r.clientWidth&&(o.style.display="none"),s=parseInt(s)-parseInt(r.clientWidth),o.addEventListener("click",function(){r.scrollTo({top:0,left:n+=210,behavior:"smooth"}),n>=s?(n=s,this.style.display="none"):this.style.display="block",t.style.display="block"}),t.addEventListener("click",function(){r.scrollTo({top:0,left:n-=200,behavior:"smooth"}),n<=0?(n=0,this.style.display="none"):this.style.display="block",o.style.display="block"})}},loadMore:function(){let e=document.querySelectorAll(".loadmore");for(var t=0,o=e.length;t<o;t++)e[t].onclick=function(e){this.innerHTML="Loading ...";let t=this.parentNode,o=this,r=new XMLHttpRequest,s=new URLSearchParams({action:"loadmore-products",paged:this.getAttribute("data-paged"),search:this.getAttribute("data-search"),store_id:this.getAttribute("data-store-id"),category_id:this.getAttribute("data-category-id"),nonce:foodpress.nonce});r.open("GET",foodpress.ajax_url+"?"+s.toString(),!0),r.onload=function(){if(200===r.status){let e=JSON.parse(r.responseText),s=(new DOMParser).parseFromString(e.products,"text/html"),n=s.querySelectorAll(".productbox");n.forEach(function(e,o){t.querySelector(".products").appendChild(e)}),new LazyLoad({elements_selector:".lazy"}),FoodPress.setProductImage(),e.next?(o.innerHTML="Tampilkan lebih banyak",o.setAttribute("data-paged",e.next)):t.removeChild(o),FoodPress.init()}},r.send()}},buttonAdd:function(){let e=document.querySelectorAll(".button-add");for(var t=0,o=e.length;t<o;t++)e[t].onclick=function(e){let t=this.parentNode,o=t.querySelector(".qty"),r=t.querySelectorAll("input"),s={};o.querySelector("input").value=1,this.style.display="none",o.style.display="block";for(var n=0,i=r.length;n<i;n++){let e=r[n].name;s[e]=r[n].value}FoodPress_Cart_Items.insert(s),FoodPress.loadBasket()}},buttonQty:function(){let e=document.querySelectorAll(".button-qty");for(var t=0,o=e.length;t<o;t++)e[t].onclick=function(){let e=this.parentNode,t=e.parentNode.parentNode.querySelector(".button-add"),o=e.parentNode.querySelector("input[name=item_id]").value,r=e.querySelector("input");"plus"==this.getAttribute("data-qty-action")?r.value++:r.value>0&&r.value--,r.value>0?FoodPress_Cart_Items.edit(o,"qty",r.value):(e.style.display="none",t.style.display="block",FoodPress_Cart_Items.delete(o)),FoodPress.loadBasket()}},loadBasket:function(){if(1==foodpress.store_open){let o=document.querySelector("footer"),r=document.getElementById("basketbox"),s=0,n=FoodPress_Cart_Items.get();if(FoodPress_Cart_Items.countSubTotal(),FoodPress_Cart_Items.countWeight(),FoodPress_Cart_Items.countTotal(),s=FoodPress_Cart_Detail.get("subtotal"),n.length>0){let i=document.querySelectorAll(".atc");for(var e=0,t=i.length;e<t;e++){let t=i[e].querySelector(".add");void 0!==t&&null!=t&&(t.style.display="block",i[e].querySelector(".qty").style.display="none")}n.forEach(function(e,t,o){let r=document.querySelectorAll(".atc-item-"+e.item_id);t=0;for(var s=r.length;t<s;t++){let o=r[t].querySelector(".qty");o.querySelector("input").value=e.qty;let s=r[t].querySelector(".add");void 0!==s&&null!=s&&(s.style.display="none",o.style.display="block")}}),r.querySelector(".basket-cart-item-count").innerHTML=n.length,r.querySelector(".basket-items-total").innerHTML=foodpress.currency.format(s),o.classList.add("product-footer"),r.style.display="block"}else if(o.classList.remove("product-footer"),void 0!==r&&null!=r){r.style.display="none";let o=document.querySelectorAll(".atc");for(e=0,t=o.length;e<t;e++){let t=o[e].querySelector(".button-add");void 0!==t&&null!=t&&(t.style.display="block"),o[e].querySelector(".qty").querySelector("input").value=0,o[e].querySelector(".qty").style.display="none"}}r.onclick=function(){FoodPress_Cart.open()}}},openSupportWa:function(){let e=document.getElementById("support-wa-toggle");void 0!==e&&null!=e&&(e.onclick=function(){let e=document.getElementById("support-wa");e.classList.add("open"),FoodPress.supportWa(),FoodPress.closeSupportWa()})},closeSupportWa:function(){let e=document.getElementById("support-wa-toggle");void 0!==e&&null!=e&&(e.onclick=function(){let e=document.getElementById("support-wa");e.classList.remove("open"),FoodPress.openSupportWa()})},supportWa:function(){let e=document.getElementById("support-wa").querySelector("form");e.onsubmit=function(t){t.preventDefault();let o=e.elements,r={},s="",n="";for(let e=0;e<o.length;e++){let t=o[e].name;""!==t&&(r[t]=o[e].value)}let i=r.message.replace(/\n/g,"%0A");if(s="?phone="+foodpress.store_admin_phone+"&text=%0ASaya *"+r.name+"*%0A%0A ðŸ’¬ "+i+"%0A%0A Via "+location.href,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return n="whatsapp://send"+s,location.href=n,!1;{n="https://web.whatsapp.com/send"+s;let e=960,t=540,o=Number(screen.width/2-e/2),r=Number(screen.height/2-t/2),i=window.open(n,"","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=1, copyhistory=no, width="+e+", height="+t+", top="+r+", left="+o);return i.focus(),!1}}}},FoodPress_Cart_Items={storage:"foodpress_cart_"+foodpress.store_id,get:function(){let e=[];return localStorage.getItem(this.storage)&&(e=JSON.parse(localStorage.getItem(this.storage))),e},empty:function(){localStorage.removeItem(this.storage)},insert:function(e){let t=this.get();$valid=!0,"item_id"in e==!1&&($valid=!1),"item_image"in e==!1&&($valid=!1),"item_name"in e==!1&&($valid=!1),"item_price"in e==!1&&($valid=!1),"item_price_slik"in e==!1&&($valid=!1),"item_weight"in e==!1&&($valid=!1),"note"in e==!1&&($valid=!1),"qty"in e==!1&&($valid=!1),"store_id"in e==!1&&($valid=!1),!0===$valid&&(t.push(e),localStorage.setItem(this.storage,JSON.stringify(t)))},edit:function(e,t,o){let r=this.get();r.forEach(function(r,s,n){e==r.item_id&&"qty"==t&&(r.qty=o)}),localStorage.setItem(this.storage,JSON.stringify(r))},delete:function(e){let t=this.get();t.forEach(function(t,o,r){e==t.item_id&&r.splice(o,1)}),localStorage.setItem(this.storage,JSON.stringify(t))},countSubTotal:function(){let e=0,t=[],o=0;t=this.get(),t.forEach(function(t,r,s){o=parseInt(t.item_price)*parseInt(t.qty),e+=o}),FoodPress_Cart_Detail.set("subtotal",e),FoodPress_Cart_Detail.set("total",e)},countWeight:function(){let e=0,t=[];t=this.get(),t.forEach(function(t,o,r){let s=parseInt(t.item_weight)*parseInt(t.qty);e+=s}),FoodPress_Cart_Detail.set("weight",e)},countTotal:function(){let e=FoodPress_Cart_Detail.get("subtotal"),t=FoodPress_Cart_Detail.get("discount_amount"),o=FoodPress_Cart_Detail.get("shipping_cost");o&&(e=parseInt(e)+parseInt(o)),t&&(e=parseInt(e)-parseInt(t)),FoodPress_Cart_Detail.set("total",e)}},FoodPress_Cart_Detail={storage:"foodpress_cart_detail",empty:function(){localStorage.removeItem(this.storage)},get:function(e){let t={},o=!1;return localStorage.getItem(this.storage)&&(t=JSON.parse(localStorage.getItem(this.storage))),"all"==e&&(o=t),"subtotal"==e&&"subtotal"in t&&(o=t.subtotal),"weight"==e&&"weight"in t&&(o=t.weight),"shipping_cost"==e&&"shipping_cost"in t&&(o=t.shipping_cost),"shipping_name"==e&&"shipping_name"in t&&(o=t.shipping_name),"shipping_etd"==e&&"shipping_etd"in t&&(o=t.shipping_etd),"discount_amount"==e&&"discount_amount"in t&&(o=t.discount_amount),"discount_code"==e&&"discount_code"in t&&(o=t.discount_code),"delivery_hour"==e&&"delivery_hour"in t&&(o=t.delivery_hour),"total"==e&&"total"in t&&(o=t.total),"note"==e&&"note"in t&&(o=t.note),o},set:function(e,t){let o={};localStorage.getItem(this.storage)&&(o=JSON.parse(localStorage.getItem(this.storage))),"subtotal"==e&&(o.subtotal=parseInt(t)),"weight"==e&&(o.weight=parseInt(t)),"shipping_cost"==e&&(o.shipping_cost=parseInt(t)),"shipping_name"==e&&(o.shipping_name=t),"shipping_etd"==e&&(o.shipping_etd=t),"discount_amount"==e&&(o.discount_amount=parseInt(t)),"discount_code"==e&&(o.discount_code=t),"delivery_hour"==e&&(o.delivery_hour=t),"total"==e&&(o.total=parseInt(t)),"note"==e&&(o.note=t),localStorage.setItem(this.storage,JSON.stringify(o))}},FoodPress_Cart_Customer={storage:"foodpress_cart_customer",get:function(e){let t={},o="";return localStorage.getItem(this.storage)&&(t=JSON.parse(localStorage.getItem(this.storage))),"all"==e&&(o=t),"name"==e&&"name"in t&&(o=t.name),"phone"==e&&"phone"in t&&(o=t.phone),"address"==e&&"address"in t&&(o=t.address),"region_id"==e&&"region_id"in t&&(o=t.region_id),"region_name"==e&&"region_name"in t&&(o=t.region_name),"shipping_location"==e&&"shipping_location"in t&&(o=t.shipping_location),o},set:function(e,t){let o={};localStorage.getItem(this.storage)&&(o=JSON.parse(localStorage.getItem(this.storage))),"name"==e&&(o.name=t),"phone"==e&&(o.phone=t),"address"==e&&(o.address=t),"region_name"==e&&(o.region_name=t),"region_id"==e&&(o.region_id=t),"shipping_location"==e&&(o.shipping_location=t),localStorage.setItem(this.storage,JSON.stringify(o))}},FoodPress_Cart={el:document.getElementById("cart"),open:function(){void 0!==this.el&&null!=this.el&&(this.loadItems(),this.loadCustomer(),this.loadShipping(),this.loadCoupon(),this.loadNote(),FoodPress_Cart_Items.countSubTotal(),FoodPress_Cart_Items.countWeight(),FoodPress_Cart_Items.countTotal(),this.loadDetail(),this.el.style.display="block",document.body.style.overflow="hidden",this.el.querySelector(".back").onclick=function(){FoodPress_Cart.close()})},close:function(){this.el.style.display="none",document.body.style.overflow="auto",FoodPress.loadBasket()},loadItems:function(){let e="",t=document.getElementById("template-productcart").innerHTML,o=FoodPress_Cart_Items.get();o.length>0?(this.el.querySelector(".cart-content-items-head-add").innerHTML='<a href="'+foodpress.store_link+'">+ Tambah</a>',o.forEach(function(o,r,s){let n=t,i="";n=n.replace("{item_image}",o.item_image),n=n.replace("{item_name}",o.item_name),i=o.item_price==o.item_price_slik?'<span class="price">'+foodpress.currency.format(o.item_price)+"</span>":'<span class="price">'+foodpress.currency.format(o.item_price)+'</span> <span class="price-slik">'+foodpress.currency.format(o.item_price_slik)+"</span>",n=n.replace("{item_price}",i),n=n.replace("{item_qty}",o.qty),n=n.replace("{item_id}",o.item_id),e+=n}),this.el.querySelector(".cart-content-items-list").innerHTML=e,this.itemChangeQty()):this.close()},itemChangeQty:function(){let e=this.el.querySelectorAll(".cart-button-qty");for(var t=0,o=e.length;t<o;t++){let o=e[t].parentNode,r=o.querySelector("input");e[t].onclick=function(){let e=o.getAttribute("data-item-id");"plus"==this.getAttribute("data-qty-action")?r.value++:r.value>0&&r.value--,r.value>0?FoodPress_Cart_Items.edit(e,"qty",r.value):FoodPress_Cart_Items.delete(e),FoodPress_Cart_Items.countSubTotal(),FoodPress_Cart_Items.countWeight(),FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadItems(),FoodPress_Cart.checkCouponCode(),FoodPress_Cart.loadShipping(),FoodPress_Cart.loadDetail()}}},loadCustomer:function(){let e=this.el.querySelector(".customer");e.querySelector("input[name=name]").value=FoodPress_Cart_Customer.get("name"),e.querySelector("input[name=phone]").value=FoodPress_Cart_Customer.get("phone"),e.querySelector("textarea[name=address]").value=FoodPress_Cart_Customer.get("address"),e.querySelector("input[name=name]").oninput=function(){FoodPress_Cart_Customer.set("name",this.value)},e.querySelector("input[name=phone]").oninput=function(){FoodPress_Cart_Customer.set("phone",this.value)},e.querySelector("textarea[name=address]").oninput=function(){FoodPress_Cart_Customer.set("address",this.value)};let t=e.querySelector("#autoComplete");void 0!==t&&null!=t&&(t.value=FoodPress_Cart_Customer.get("region_name"),new autoComplete({data:{src:async()=>{const e=await fetch(foodpress.regions_source),t=await e.json();return t},key:["text"],cache:!1},sort:(e,t)=>e.match<t.match?-1:e.match>t.match?1:0,placeHolder:"Cari Kecamatan",selector:"#autoComplete",threshold:1,debounce:300,searchEngine:"strict",resultsList:{render:!0,container:e=>{e.setAttribute("class","region_list")},destination:document.querySelector("#autoComplete"),position:"afterend",element:"ul"},maxResults:10,highlight:!0,resultItem:{content:(e,t)=>{t.innerHTML=e.match},element:"li"},noResults:()=>{const e=document.createElement("li");e.setAttribute("class","autoComplete_result"),e.setAttribute("tabindex","1"),e.innerHTML="Tidak di temukan hasil",document.querySelector("#autoComplete_list").appendChild(e)},onSelection:e=>{FoodPress_Cart_Customer.set("region_id",e.selection.value.id),FoodPress_Cart_Customer.set("region_name",e.selection.value.text),document.querySelector("#autoComplete").value=e.selection.value.text,FoodPress_Cart.loadShipping()}}))},loadShipping:function(){if(FoodPress_Cart_Detail.set("shipping_cost",""),FoodPress_Cart_Detail.set("shipping_name",""),FoodPress_Cart_Detail.set("shipping_etd",""),1==foodpress.store_ongkir_enable&&"flatongkir"==foodpress.store_ongkir_provider&&(FoodPress_Cart_Detail.set("shipping_cost",foodpress.store_ongkir),FoodPress_Cart_Detail.set("shipping_name",foodpress.store_ongkir_name),FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadDetail()),1==foodpress.store_ongkir_enable&&"rajaongkir"==foodpress.store_ongkir_provider){let e=this.el.querySelector(".shipping-method-rajaongkir"),t=FoodPress_Cart_Customer.get("region_id"),o=FoodPress_Cart_Detail.get("weight"),r=foodpress.ajax_url+"?action=get_ongkir&nonce="+foodpress.nonce+"&destination="+t+"&weight="+o,s=document.getElementById("shipping-rajaongkir-service-template").innerHTML,n="",i="";if(e.querySelector(".shipping-loader").style.display="block",t){let t=function(){let t=FoodPress_Cart_Detail.get("shipping_cost"),o=FoodPress_Cart_Detail.get("shipping_etd"),r=FoodPress_Cart_Detail.get("shipping_name");t&&(e.querySelector(".shipping-show-name").innerHTML=r,e.querySelector(".shipping-show-etd").innerHTML=o,e.querySelector(".shipping-show-cost").innerHTML=foodpress.currency.format(t),FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadDetail())};fetch(r).then(e=>e.json()).then(function(o){if("404"==o)alert("Gagal mendapatkan data ongkir, silahkan hubungi admin");else{for(let e=0;e<o.length;e++){let t=s;t=t.replace("{{name}}",o[e].courier+" "+o[e].service),t=t.replace("{{data-name}}",o[e].courier+" "+o[e].service),i="",o[e].etd&&(i="Estimasi Hari : "+o[e].etd),t=t.replace("{{etd}}",i),t=t.replace("{{data-etd}}",i),t=t.replace("{{cost}}",foodpress.currency.format(o[e].value)),t=t.replace("{{data-cost}}",o[e].value),n+=t}if(o.length>0){i="",o[0].etd&&(i="Estimasi Hari : "+o[0].etd),FoodPress_Cart_Detail.set("shipping_cost",o[0].value),FoodPress_Cart_Detail.set("shipping_etd",i),FoodPress_Cart_Detail.set("shipping_name",o[0].courier+" "+o[0].service),e.querySelector(".rajaongkir-list").innerHTML=n,t();let r=e.querySelectorAll(".rajaongkir-list-box");for(let e=0;e<r.length;e++)r[e].onclick=function(){let e=this.getAttribute("data-name"),o=this.getAttribute("data-etd"),r=this.getAttribute("data-cost");FoodPress_Cart_Detail.set("shipping_cost",r),FoodPress_Cart_Detail.set("shipping_name",e),FoodPress_Cart_Detail.set("shipping_etd",o),t()};e.querySelector(".shipping-loader").style.display="none"}else alert("Tidak di temukan data ongkir yang tersedia, silahkan hubungi admin")}}).catch(function(e){console.log(e)})}}if(1==foodpress.store_ongkir_enable&&"custom"==foodpress.store_ongkir_provider){let e,t,o=this.el.querySelector(".choose-shipping-location"),r=o.options,s=this.el.querySelector(".shipping-method-customongkir");r.length>0&&(t=r[0].getAttribute("data-cost"),e=r[0].getAttribute("data-location"),FoodPress_Cart_Detail.set("shipping_cost",t),FoodPress_Cart_Detail.set("shipping_name",foodpress.store_ongkir_name),FoodPress_Cart_Customer.set("shipping_location",e),s.querySelector("#custom-ongkir-location").innerHTML=e,s.querySelector("#custom-ongkir-cost").innerHTML=foodpress.currency.format(t),FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadDetail()),o.onchange=function(){e=this.options[this.selectedIndex].getAttribute("data-location"),t=this.options[this.selectedIndex].getAttribute("data-cost"),FoodPress_Cart_Detail.set("shipping_cost",t),FoodPress_Cart_Detail.set("shipping_name",foodpress.store_ongkir_name),FoodPress_Cart_Customer.set("shipping_location",e),s.querySelector("#custom-ongkir-location").innerHTML=e,s.querySelector("#custom-ongkir-cost").innerHTML=foodpress.currency.format(t),FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadDetail()}}if(!0===foodpress.store_delivery_hour){let e=this.el.querySelector(".shipping-delivery-hours"),t=e.querySelectorAll(".shipping-delivery-hour-option"),o=e.querySelectorAll(".radios");o[0].classList.add("chooser");let r=t[0].querySelector(".labele").innerText;FoodPress_Cart_Detail.set("delivery_hour",r);for(let e=0;e<t.length;e++)t[e].onclick=function(){for(var e=0,t=o.length;e<t;e++)o[e].classList.remove("chooser");r=this.querySelector(".labele").innerText,FoodPress_Cart_Detail.set("delivery_hour",r),this.querySelector(".radios").classList.add("chooser")}}},loadCoupon:function(){let e=this.el.querySelector(".cart-content-coupon-list"),t=e.querySelector(".coupon-box").querySelector("button"),o=e.querySelector(".coupon-box").querySelector("input");this.checkCouponCode(),t.onclick=function(){$code=o.value,this.innerHTML="Checking ....",this.disabled=!0,o.disabled=!0,FoodPress_Cart_Detail.set("discount_code",$code),FoodPress_Cart.checkCouponCode()}},checkCouponCode:function(){let e=this.el.querySelector(".cart-content-coupon-list"),t=FoodPress_Cart_Detail.get("discount_code"),o=e.querySelector(".coupon-box").querySelector("input"),r=e.querySelector(".coupon-box").querySelector("button"),s={};t&&(e.querySelector(".coupon-box").querySelector("input").value=t),s.nonce=foodpress.nonce,s.code=t,s.cart=FoodPress_Cart_Items.get(),t&&fetch(foodpress.ajax_url+"?action=apply_coupon",{method:"POST",body:JSON.stringify(s)}).then(e=>e.json()).then(function(t){if("status"in t&&"valid"==t.status)e.querySelector(".coupon-box-notice").innerHTML=t.message,e.querySelector(".coupon-box-notice").style.display="block",FoodPress_Cart_Detail.set("discount_amount",t.discount),FoodPress_Cart_Detail.set("discount_code",s.code),e.querySelector(".coupon-box-notice").classList.remove("error");else{FoodPress_Cart_Detail.set("discount_amount",""),FoodPress_Cart_Detail.set("discount_code","");let o="Error, please Contact this site owner";"message"in t&&(o=t.message),e.querySelector(".coupon-box-notice").innerHTML=o,e.querySelector(".coupon-box-notice").classList.add("error")}FoodPress_Cart_Items.countTotal(),FoodPress_Cart.loadDetail(),o.disabled=!1,r.disabled=!1,r.innerHTML="Gunakan kode voucher"})},loadNote:function(){let e=this.el.querySelector(".note-box"),t=FoodPress_Cart_Detail.get("note");t&&(e.querySelector("textarea").value=t),e.querySelector("textarea").oninput=function(){FoodPress_Cart_Detail.set("note",this.value)}},loadDetail:function(){let e=this.el.querySelector(".cart-content-detail-list"),t=FoodPress_Cart_Detail.get("subtotal"),o=FoodPress_Cart_Detail.get("total"),r=FoodPress_Cart_Detail.get("shipping_cost"),s=FoodPress_Cart_Detail.get("discount_amount");$templ="<table>",$templ+='<tr><td>Sub Total</td><td class="value">'+foodpress.currency.format(t)+"</td></tr>",r&&($templ+='<tr><td>Ongkir</td><td class="value">'+foodpress.currency.format(r)+"</td></tr>"),s&&($templ+='<tr><td>Diskon</td><td class="value" style="color:green">-'+foodpress.currency.format(s)+"</td></tr>"),$templ+='<tr><td style="font-weight: bold">Total</td><td class="value" style="font-weight: bold">'+foodpress.currency.format(o)+"</td></tr>",$templ+="</table>",e.innerHTML=$templ,this.loadSAubmit()},loadSAubmit:function(){$submit=this.el.querySelector("#submit"),$submit.onclick=function(){let e=[],t=[{key:"name",message:"Mohon masukan nama Anda"},{key:"phone",message:"Mohon masukan nomor hp Anda"},{key:"address",message:"Mohon masukan alamat Anda"}],o=[];foodpress.store_ongkir_enable&&"byadmin"!==foodpress.store_ongkir_provider&&o.push({key:"shipping_cost",message:"Mohon pilih kurir pengiriman"}),foodpress.store_ongkir_enable&&"rajaongkir"==foodpress.store_ongkir_provider&&t.push({key:"region_id",message:"Mohon masukan kecamatan Anda"}),t.forEach(function(t,o){FoodPress_Cart_Customer.get(t.key)||e.push(t.message)}),o.forEach(function(t,o){FoodPress_Cart_Detail.get(t.key)||e.push(t.message)}),e.length>0?FoodPress_Cart.errorNotice(e[0]):(this.innerHTML="Processing ....",this.onclick=!1,FoodPress_Cart.insertOrder())}},errorNotice:function(e){let t=document.getElementById("error-field-template").content.cloneNode(!0);document.body.appendChild(t);let o=document.querySelector(".error-field");o.innerHTML=e,setTimeout(function(){o.style.top="110px"},100),setTimeout(function(){o.style.top="-110px"},1500),setTimeout(function(){o.parentNode.removeChild(o)},1600)},insertOrder:function(){let e=FoodPress_Cart_Items.get();if(e.length>0){let t={},o=0,r=null,s=null,n=null,i="",a=0,l=0,c="";t.nonce=foodpress.nonce,t.items=e,t.detail=FoodPress_Cart_Detail.get("all"),t.customer=FoodPress_Cart_Customer.get("all"),fetch(foodpress.ajax_url+"?action=order_create",{method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(function(e){if(console.log(e),"success"==e.status){if(r=e.data.items,s=e.data.detail,n=e.data.customer,r.forEach(function(e,t){o=t+1,o+=". ",a=parseInt(e.item_price),l=a*parseInt(e.qty),i+="%0A*"+o+e.item_name+"* %0A",i+="  Quantity: "+e.qty+" %0A",i+="  Harga (@): "+foodpress.currency.format(a)+" %0A",i+="  Total Harga: "+foodpress.currency.format(l)+" %0A"}),i+="%0ASub Total : *"+foodpress.currency.format(s.subtotal)+"*%0A",foodpress.store_ongkir_enable){let e="";"custom"==foodpress.store_ongkir_provider&&(e=" "+n.shipping_location),"byadmin"==foodpress.store_ongkir_provider?i+="Ongkir : *By Admin* %0A":i+="Ongkir : *"+foodpress.currency.format(s.shipping_cost)+"* ("+s.shipping_name+")"+e+"%0A"}s.discount_amount&&(i+="Diskon : *-"+foodpress.currency.format(s.discount_amount)+"* ("+s.discount_code+")%0A"),i+="Total : *"+foodpress.currency.format(s.total)+"*%0A%0A",foodpress.store_delivery_hour&&(i+="Pengiriman : *"+s.delivery_hour+"*%0A%0A"),void 0!==s.note&&(i+="*Catatan :* %0A"+s.note+"%0A%0A");let t="?phone="+foodpress.store_admin_phone+"&text="+foodpress.store_opened_message+" .%0A"+i+"--------------------------------%0A*Nama :*%0A"+n.name+" ( "+n.phone+" ) %0A%0A*Alamat :*%0A"+n.address.replace(/(\r\n|\n|\r)/gm,"%0A")+"%0A%0AVia "+location.href;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return c="whatsapp://send"+t,FoodPress_Cart_Detail.empty(),FoodPress_Cart_Items.empty(),FoodPress_Cart.el.querySelector("#submit").innerHTML="Pesan",FoodPress_Cart.close(),location.href=c,!1;{c="https://web.whatsapp.com/send"+t;let e=960,o=540,r=Number(screen.width/2-e/2),s=Number(screen.height/2-o/2),n=window.open(c,"","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=1, copyhistory=no, width="+e+", height="+o+", top="+s+", left="+r);return n.focus(),FoodPress_Cart_Items.empty(),FoodPress_Cart_Detail.empty(),window.location.href=foodpress.store_link,!1}}console.log(e)}).catch(function(e){console.log(e)})}}},FoodPress.init();